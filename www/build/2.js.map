{"version":3,"sources":["../../src/pages/make-payment/make-payment.module.ts","../../src/pages/make-payment/make-payment.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MakePaymentPage } from './make-payment';\n\n@NgModule({\n  declarations: [\n    MakePaymentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MakePaymentPage),\n  ],\n})\nexport class MakePaymentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/make-payment/make-payment.module.ts","import { Component } from '@angular/core';\nimport { AlertController, LoadingController, IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\n\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\n\nimport { CardsProvider } from '../../providers/cards/cards';\nimport { PaymentsProvider } from '../../providers/payments/payments';\n\nimport { UtilsProvider } from '../../providers/utils/utils';\n\nimport moment from 'moment';\n\n@IonicPage()\n@Component({\n\tselector: 'page-make-payment',\n\ttemplateUrl: 'make-payment.html',\n})\nexport class MakePaymentPage {\n\n\tuser: any = [];\n\tpaymentForm: FormGroup;\n\n\tconstructor(\n\t\tpublic alertCtrl: AlertController,\n\t\tpublic formBuilder: FormBuilder,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tpublic payments: PaymentsProvider,\t\t\n\t\tpublic userCards: CardsProvider,\n\t\tpublic utils: UtilsProvider,\n\t\tpublic viewCtrl: ViewController,\n\n\t\tpublic navCtrl: NavController,\n\t\tpublic navParams: NavParams\n\t) {\t\t\n\t\tthis.user = navParams.get(\"userTo\");\n\n\t\tthis.paymentForm = this.formBuilder.group({\n\t\t\tcard: [null, Validators.required],\n\t\t\tvalue: [null, Validators.required],\n\t\t});\n\t}\n\n\t//makePayment(card, date, user, value) \n\n\tmakePayment() {\t\t\n\t\tif(this.paymentForm.valid) {\n\t\t\tlet loading = this.loadingCtrl.create({\n\t\t\t\tcontent: \"Realizando transação, aguarde!\"\n\t\t\t});\n\t\t\tloading.present();\n\n\t\t\tlet values = this.paymentForm.value;\n\t\t\t\n\t\t\tthis.payments.makePayment(\n\t\t\t\tvalues[\"card\"],\n\t\t\t\tmoment().format(),\n\t\t\t\tthis.user,\n\t\t\t\tvalues[\"value\"]\n\t\t\t).then(() => {\n\t\t\t\tloading.dismiss();\n\n\t\t\t\tthis.alertCtrl.create({\n\t\t\t\t\ttitle: \"Transação realizada!\",\n\t\t\t\t\tsubTitle: \"Sua transação no valor \" + values[\"value\"] + \" para o usuário \" + this.user.username + \" foi realizada com sucesso!\",\n\t\t\t\t\tenableBackdropDismiss: true,\n\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\ttext: \"Voltar\",\n\t\t\t\t\t\thandler: () => {\n\t\t\t\t\t\t\tthis.viewCtrl.dismiss();\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}).present();\n\t\t\t}).catch((error) => {\n\t\t\t\tloading.dismiss();\n\n\t\t\t\tlet error_text;\n\t\t\t\tif(error.refused) error_text = \"Sua transação não foi autorizada, tente novamente.\";\n\t\t\t\telse error_text = \"Falha ao se comunicar com o servidor, tente novamente.\";\n\n\t\t\t\tthis.alertCtrl.create({\n\t\t\t\t\ttitle: \"Transação falhou!\",\n\t\t\t\t\tsubTitle: error_text,\n\t\t\t\t\tbuttons: [\"Ok\"]\n\t\t\t\t}).present();\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/make-payment/make-payment.ts"],"sourceRoot":""}